{"version":3,"sources":["register.js"],"names":["$","init","eventList","on","mobile_txt","val","trim","checkPhone","mui","toast","post","mobile","result","meta","status","console","log","time","attr","text","timeId","setInterval","clearInterval","removeAttr","mobile_tex","code_tex","email_tex","pwd_tex","pwd2_tex","gender_tex","length","checkEmail","code","email","pwd","gender","location","href","msg","phone","test","myemail","myReg"],"mappings":";;AAAAA,CAAC,CAAC,YAAY;AACZC,EAAAA,IAAI;;AACJ,WAASA,IAAT,GAAgB;AACdC,IAAAA,SAAS;AACV;;AAED,WAASA,SAAT,GAAqB;AACnB;AACAF,IAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBG,EAAjB,CAAoB,KAApB,EAA2B,YAAY;AACrC;AACA,UAAIC,UAAU,GAAGJ,CAAC,CAAC,sBAAD,CAAD,CAA0BK,GAA1B,GAAgCC,IAAhC,EAAjB;;AACA,UAAI,CAACC,UAAU,CAACH,UAAD,CAAf,EAA6B;AAC3BI,QAAAA,GAAG,CAACC,KAAJ,CAAU,UAAV;AACA;AACD,OANoC,CAOrC;;;AACAT,MAAAA,CAAC,CAACU,IAAF,CAAO,0DAAP,EAAmE;AAAEC,QAAAA,MAAM,EAAEP;AAAV,OAAnE,EACE,UAAUQ,MAAV,EAAkB;AAChB;AACA,YAAIA,MAAM,CAACC,IAAP,CAAYC,MAAZ,IAAsB,GAA1B,EAA+B;AAC7BC,UAAAA,OAAO,CAACC,GAAR,CAAYJ,MAAZ,EAD6B,CAE7B;AACA;AACA;;AACA,cAAIK,IAAI,GAAG,CAAX;AACAjB,UAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBkB,IAAjB,CAAsB,UAAtB,EAAkC,UAAlC,EAA8CC,IAA9C,WAAsDF,IAAtD,sCAN6B,CAO7B;;AACA,cAAIG,MAAM,GAAGC,WAAW,CAAC,YAAY;AACnCJ,YAAAA,IAAI;AACJjB,YAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBmB,IAAjB,WAAyBF,IAAzB;;AAEA,gBAAIA,IAAI,IAAI,CAAZ,EAAe;AACbK,cAAAA,aAAa,CAACF,MAAD,CAAb;AACApB,cAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBuB,UAAjB,CAA4B,UAA5B,EAAwCJ,IAAxC,CAA6C,OAA7C;AACD;AACF,WARuB,EAQrB,IARqB,CAAxB;AASD,SAjBD,MAiBO;AACLJ,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACD;AACF,OAvBH;AAyBD,KAjCD,EAFmB,CAoCnB;;AACAhB,IAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBG,EAAnB,CAAsB,KAAtB,EAA6B,YAAY;AAEvC;AACA,UAAIqB,UAAU,GAAGxB,CAAC,CAAC,sBAAD,CAAD,CAA0BK,GAA1B,GAAgCC,IAAhC,EAAjB;AACA,UAAImB,QAAQ,GAAGzB,CAAC,CAAC,oBAAD,CAAD,CAAwBK,GAAxB,GAA8BC,IAA9B,EAAf;AACA,UAAIoB,SAAS,GAAG1B,CAAC,CAAC,qBAAD,CAAD,CAAyBK,GAAzB,GAA+BC,IAA/B,EAAhB;AACA,UAAIqB,OAAO,GAAG3B,CAAC,CAAC,mBAAD,CAAD,CAAuBK,GAAvB,GAA6BC,IAA7B,EAAd;AACA,UAAIsB,QAAQ,GAAG5B,CAAC,CAAC,oBAAD,CAAD,CAAwBK,GAAxB,GAA8BC,IAA9B,EAAf;AACA,UAAIuB,UAAU,GAAG7B,CAAC,CAAC,sBAAD,CAAD,CAA0BK,GAA1B,GAAgCC,IAAhC,EAAjB,CARuC,CASvC;;AACA,UAAI,CAACC,UAAU,CAACiB,UAAD,CAAf,EAA6B;AAC3BhB,QAAAA,GAAG,CAACC,KAAJ,CAAU,UAAV;AACA;AACD;;AACD,UAAIgB,QAAQ,CAACK,MAAT,IAAmB,CAAvB,EAA0B;AACxBtB,QAAAA,GAAG,CAACC,KAAJ,CAAU,WAAV;AACA;AACD;;AACD,UAAI,CAACsB,UAAU,CAACL,SAAD,CAAf,EAA4B;AAC1BlB,QAAAA,GAAG,CAACC,KAAJ,CAAU,SAAV;AACA;AACD;;AACD,UAAIkB,OAAO,CAACG,MAAR,GAAgB,CAApB,EAAuB;AACrBtB,QAAAA,GAAG,CAACC,KAAJ,CAAU,SAAV;AACA;AACD;;AACD,UAAImB,QAAQ,IAAID,OAAhB,EAAyB;AACvBnB,QAAAA,GAAG,CAACC,KAAJ,CAAU,SAAV;AACA;AACD,OA7BsC,CA+BvC;;;AACAT,MAAAA,CAAC,CAACU,IAAF,CAAO,iDAAP,EAA0D;AACxDC,QAAAA,MAAM,EAAEa,UADgD;AAExDQ,QAAAA,IAAI,EAAEP,QAFkD;AAGxDQ,QAAAA,KAAK,EAAEP,SAHiD;AAIxDQ,QAAAA,GAAG,EAAEP,OAJmD;AAKxDQ,QAAAA,MAAM,EAAEN;AALgD,OAA1D,EAOE,UAAUjB,MAAV,EAAkB;AAChBG,QAAAA,OAAO,CAACC,GAAR,CAAYJ,MAAM,CAACC,IAAP,CAAYC,MAAxB;;AACA,YAAIF,MAAM,CAACC,IAAP,CAAYC,MAAZ,IAAsB,GAA1B,EAA+B;AAC7B;AAEA;AACAN,UAAAA,GAAG,CAACC,KAAJ,CAAU,MAAV;AACAY,UAAAA,WAAW,CAAC,YAAM;AAChBe,YAAAA,QAAQ,CAACC,IAAT,GAAgB,YAAhB;AACD,WAFU,EAER,IAFQ,CAAX;AAID,SATD,MASO;AACL7B,UAAAA,GAAG,CAACC,KAAJ,CAAUG,MAAM,CAACC,IAAP,CAAYyB,GAAtB;AACD;AACF,OArBH;AAwBD,KAxDD;AAyDD,GApGW,CAsGZ;;;AACA,WAAS/B,UAAT,CAAoBgC,KAApB,EAA2B;AACzB,QAAI,CAAC,kBAAkBC,IAAlB,CAAuBD,KAAvB,CAAL,EAAoC;AAClC,aAAO,KAAP;AACD,KAFD,MAEO;AACL,aAAO,IAAP;AACD;AACF,GA7GW,CA8GZ;;;AACA,WAASR,UAAT,CAAoBU,OAApB,EAA6B;AAC3B,QAAIC,KAAK,GAAG,oDAAZ;;AACA,QAAIA,KAAK,CAACF,IAAN,CAAWC,OAAX,CAAJ,EAAyB;AACvB,aAAO,IAAP;AACD,KAFD,MAEO;AACL,aAAO,KAAP;AACD;AACF;AAEF,CAxHA,CAAD","sourcesContent":["$(function () {\r\n  init()\r\n  function init() {\r\n    eventList()\r\n  }\r\n\r\n  function eventList() {\r\n    // 绑定验证码  点击事件\r\n    $('.verify_btn').on('tap', function () {\r\n      // 1.验证手机号码是否合法\r\n      let mobile_txt = $('input[name=\"mobile\"]').val().trim();\r\n      if (!checkPhone(mobile_txt)) {\r\n        mui.toast('输入手机号不合法')\r\n        return;\r\n      }\r\n      // 2.发送请求到后台\r\n      $.post(\"http://api.pyg.ak48.xyz/api/public/v1/users/get_reg_code\", { mobile: mobile_txt },\r\n        function (result) {\r\n          // 判断是否请求成功\r\n          if (result.meta.status == 200) {\r\n            console.log(result)\r\n            // let data = result.data;\r\n            // 2.发送验证码成功后禁用按钮  开始倒计时\r\n            // $(\".verify_btn\").attr('disabled', 'disabled');\r\n            let time = 5;\r\n            $(\".verify_btn\").attr('disabled', 'disabled').text(`${time} 秒后再获取`);\r\n            // $(\".verify_btn\").text(`${time} 秒后再获取`);\r\n            let timeId = setInterval(function () {\r\n              time--;\r\n              $(\".verify_btn\").text(`${time} 秒后再获取`);\r\n             \r\n              if (time == 0) {\r\n                clearInterval(timeId);\r\n                $(\".verify_btn\").removeAttr('disabled').text('获取验证码');\r\n              }\r\n            }, 1000)\r\n          } else {\r\n            console.log('请求失败')\r\n          }\r\n        }\r\n      );\r\n    })\r\n    // 绑定注册点击事件\r\n    $('.register_btn').on('tap', function () {\r\n      \r\n      // 获取到所有表单里的元素的值\r\n      let mobile_tex = $('input[name=\"mobile\"]').val().trim();\r\n      let code_tex = $('input[name=\"code\"]').val().trim();\r\n      let email_tex = $('input[name=\"email\"]').val().trim();\r\n      let pwd_tex = $('input[name=\"pwd\"]').val().trim();\r\n      let pwd2_tex = $('input[name=\"pwd2\"]').val().trim();\r\n      let gender_tex = $('input[name=\"gender\"]').val().trim();\r\n      // 逐步验证\r\n      if (!checkPhone(mobile_tex)) {\r\n        mui.toast('输入手机号不合法');\r\n        return;\r\n      }\r\n      if (code_tex.length != 4) {\r\n        mui.toast('请输入正确的验证码');\r\n        return;\r\n      }\r\n      if (!checkEmail(email_tex)) {\r\n        mui.toast('邮箱格式不正确');\r\n        return;\r\n      }\r\n      if (pwd_tex.length <6) {\r\n        mui.toast('密码格式不正确');\r\n        return;\r\n      }\r\n      if (pwd2_tex != pwd_tex) {\r\n        mui.toast('请输入正确密码');\r\n        return;\r\n      }\r\n\r\n      // 验证完毕   发送请求到后台完成注册\r\n      $.post(\"http://api.pyg.ak48.xyz/api/public/v1/users/reg\", {\r\n        mobile: mobile_tex,\r\n        code: code_tex,\r\n        email: email_tex,\r\n        pwd: pwd_tex,\r\n        gender: gender_tex\r\n      },\r\n        function (result) {\r\n          console.log(result.meta.status);\r\n          if (result.meta.status == 200) {\r\n            // 注册成功  显示成功提示 跳转到登录页面\r\n           \r\n            // console.log(1111);\r\n            mui.toast('注册成功');\r\n            setInterval(() => {\r\n              location.href = 'login.html';\r\n            }, 1000)\r\n\r\n          } else {\r\n            mui.toast(result.meta.msg);\r\n          }\r\n        }\r\n      );\r\n\r\n    })\r\n  }\r\n\r\n  // 验证 手机合法性\r\n  function checkPhone(phone) {\r\n    if (!/^1[34578]\\d{9}$/.test(phone)) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n  // 验证邮箱\r\n  function checkEmail(myemail) {\r\n    var myReg = /^[a-zA-Z0-9_-]+@([a-zA-Z0-9]+\\.)+(com|cn|net|org)$/;\r\n    if (myReg.test(myemail)) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n})"],"file":"register.js"}