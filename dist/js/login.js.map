{"version":3,"sources":["login.js"],"names":["$","init","eventList","on","username","val","trim","password","checkPhone","mui","toast","length","post","result","console","log","meta","status","data","JSON","stringify","sessionStorage","setItem","pageurl","getItem","location","href","setInterval","msg","phone","test"],"mappings":";;AAAAA,CAAC,CAAC,YAAY;AACVC,EAAAA,IAAI;;AACJ,WAASA,IAAT,GAAgB;AACZC,IAAAA,SAAS;AACZ;;AACD,WAASA,SAAT,GAAqB;AACjBF,IAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBG,EAAhB,CAAmB,KAAnB,EAA0B,YAAY;AAClC;AACA,UAAIC,QAAQ,GAAGJ,CAAC,CAAC,wBAAD,CAAD,CAA4BK,GAA5B,GAAkCC,IAAlC,EAAf;AACA,UAAIC,QAAQ,GAAGP,CAAC,CAAC,wBAAD,CAAD,CAA4BK,GAA5B,GAAkCC,IAAlC,EAAf;;AACA,UAAI,CAACE,UAAU,CAACJ,QAAD,CAAf,EAA2B;AACvBK,QAAAA,GAAG,CAACC,KAAJ,CAAU,SAAV;AACA;AACH;;AACD,UAAIH,QAAQ,CAACI,MAAT,GAAkB,CAAtB,EAAyB;AACrBF,QAAAA,GAAG,CAACC,KAAJ,CAAU,SAAV;AACA;AACH,OAXiC,CAalC;;;AACAV,MAAAA,CAAC,CAACY,IAAF,CAAO,6CAAP,EAAsD;AAClDR,QAAAA,QAAQ,EAAEA,QADwC;AAElDG,QAAAA,QAAQ,EAAEA;AAFwC,OAAtD,EAII,UAAUM,MAAV,EAAkB;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,YAAIA,MAAM,CAACG,IAAP,CAAYC,MAAZ,IAAsB,GAA1B,EAA+B;AAC3B;AACA,cAAIC,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAeP,MAAM,CAACK,IAAtB,CAAX;AACAG,UAAAA,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAmCJ,IAAnC;AACAT,UAAAA,GAAG,CAACC,KAAJ,CAAU,MAAV,EAJ2B,CAK3B;AACA;;AACA,cAAIa,OAAO,GAAGF,cAAc,CAACG,OAAf,CAAuB,SAAvB,CAAd,CAP2B,CAQ3B;;AACA,cAAI,CAACD,OAAL,EAAc;AACVE,YAAAA,QAAQ,CAACC,IAAT,GAAgB,YAAhB;AACH;;AACDC,UAAAA,WAAW,CAAC,YAAM;AACdF,YAAAA,QAAQ,CAACC,IAAT,GAAcH,OAAd;AACH,WAFU,EAER,IAFQ,CAAX;AAGH,SAfD,MAeO;AACHd,UAAAA,GAAG,CAACC,KAAJ,CAAUG,MAAM,CAACG,IAAP,CAAYY,GAAtB;AACH;AACJ,OAxBL;AA2BH,KAzCD;AA0CH;;AACD,WAASpB,UAAT,CAAoBqB,KAApB,EAA2B;AACvB,QAAI,CAAE,kBAAkBC,IAAlB,CAAuBD,KAAvB,CAAN,EAAsC;AAClC,aAAO,KAAP;AACH,KAFD,MAEO;AACH,aAAO,IAAP;AACH;AACJ;AACJ,CAxDA,CAAD","sourcesContent":["$(function () {\r\n    init()\r\n    function init() {\r\n        eventList()\r\n    }\r\n    function eventList() {\r\n        $('.login_btn').on('tap', function () {\r\n            // 获取用户手机和密码   进行格式验证\r\n            let username = $('input[name=\"username\"]').val().trim();\r\n            let password = $('input[name=\"password\"]').val().trim();\r\n            if (!checkPhone(username)) {\r\n                mui.toast('手机格式不正确');\r\n                return;\r\n            }\r\n            if (password.length < 6) {\r\n                mui.toast('密码格式不正确');\r\n                return;\r\n            }\r\n\r\n            // 构造参数  发送请求\r\n            $.post(\"http://api.pyg.ak48.xyz/api/public/v1/login\", {\r\n                username: username,\r\n                password: password\r\n            },\r\n                function (result) {\r\n                    console.log(result);\r\n                    if (result.meta.status == 200) {\r\n                        // 登录成功了  就把数据  存到会话存储里面\r\n                        let data = JSON.stringify(result.data);\r\n                        sessionStorage.setItem('userinfo', data);\r\n                        mui.toast('登录成功');\r\n                        // 登录成功后  就要返回原来的页面  如果没有就跳回主页\r\n                        // 在加入购物车的时候就将当前页的地址存到会话存储  登录成功后直接跳转\r\n                        let pageurl = sessionStorage.getItem('pageurl');\r\n                        //如果没有就跳回主页\r\n                        if (!pageurl) {\r\n                            location.href = \"index.html\";\r\n                        }\r\n                        setInterval(() => {\r\n                            location.href=pageurl;\r\n                        }, 1000)\r\n                    } else {\r\n                        mui.toast(result.meta.msg);\r\n                    }\r\n                }\r\n            );\r\n\r\n        })\r\n    }\r\n    function checkPhone(phone) {\r\n        if (!(/^1[34578]\\d{9}$/.test(phone))) {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n})"],"file":"login.js"}